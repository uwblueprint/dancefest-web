{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) {\n  var hasNativeReflectConstruct = _isNativeReflectConstruct();\n\n  return function _createSuperInternal() {\n    var Super = _getPrototypeOf(Derived),\n        result;\n\n    if (hasNativeReflectConstruct) {\n      var NewTarget = _getPrototypeOf(this).constructor;\n\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return _possibleConstructorReturn(this, result);\n  };\n}\n\nfunction _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nimport React from 'react';\nimport { canUseDOM } from 'exenv';\nimport ReactDOM from 'react-dom';\nimport invariant from 'tiny-invariant';\nimport { layers } from '@atlaskit/theme/constants';\nimport { PORTAL_MOUNT_EVENT, PORTAL_UNMOUNT_EVENT } from '../constants';\n\nvar createContainer = function createContainer(zIndex) {\n  var container = document.createElement('div');\n  container.setAttribute('class', 'atlaskit-portal');\n  container.setAttribute('style', \"z-index: \".concat(zIndex, \";\"));\n  return container;\n};\n\nvar getBody = function getBody() {\n  invariant(document && document.body, 'cannot find document.body');\n  return document.body;\n};\n/**\n * Reverses the name: zIndex object so we can quickly access it using the zIndex value as the key.\n */\n\n\nvar zIndexToName = Object.keys(layers).reduce(function (acc, name) {\n  var layerName = name;\n  var value = layers[layerName]();\n  acc[value] = layerName;\n  return acc;\n}, {});\n\nvar getLayerName = function getLayerName(zIndex) {\n  return Object.prototype.hasOwnProperty.call(zIndexToName, zIndex) ? zIndexToName[zIndex] : null;\n};\n\nvar getEvent = function getEvent(eventName, zIndex) {\n  var detail = {\n    layer: getLayerName(Number(zIndex)),\n    zIndex: zIndex\n  }; // In ie11 the CustomEvent object exists, but it cannot be used as a constructor\n\n  if (typeof CustomEvent === 'function') {\n    return new CustomEvent(eventName, {\n      detail: detail\n    });\n  } // CustomEvent constructor API not supported (ie11)\n  // Using `new Event` or `new CustomEvent` does not work in ie11\n\n\n  var event = document.createEvent('CustomEvent');\n  var params = {\n    bubbles: true,\n    cancellable: true,\n    detail: detail\n  };\n  event.initCustomEvent(eventName, params.bubbles, params.cancellable, params.detail);\n  return event;\n};\n\nvar firePortalEvent = function firePortalEvent(eventName, zIndex) {\n  var event = getEvent(eventName, zIndex);\n  window.dispatchEvent(event);\n};\n\nvar getPortalParent = function getPortalParent() {\n  var parentElement = document.querySelector('body > .atlaskit-portal-container');\n\n  if (!parentElement) {\n    var parent = document.createElement('div');\n    parent.setAttribute('class', 'atlaskit-portal-container');\n    parent.setAttribute('style', \"display: flex;\");\n    getBody().appendChild(parent);\n    return parent;\n  }\n\n  return parentElement;\n}; // This is a generic component does two things:\n// 1. Portals it's children using React.createPortal\n// 2. Creates the DOM node container for the portal based on props\n// 3. Ensures DOM the container creates it's own stacking context\n\n\nvar Portal = /*#__PURE__*/function (_React$Component) {\n  _inherits(Portal, _React$Component);\n\n  var _super = _createSuper(Portal);\n\n  function Portal() {\n    var _this;\n\n    _classCallCheck(this, Portal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      container: canUseDOM ? createContainer(_this.props.zIndex) : undefined,\n      portalIsMounted: false\n    });\n\n    return _this;\n  }\n\n  _createClass(Portal, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var container = this.state.container;\n      var zIndex = this.props.zIndex;\n\n      if (container && prevProps.zIndex !== zIndex) {\n        var newContainer = createContainer(zIndex);\n        getPortalParent().replaceChild(container, newContainer); // eslint-disable-next-line react/no-did-update-set-state\n\n        this.setState({\n          container: newContainer\n        });\n      } else if (!prevState.container && container) {\n        // SSR path\n        getPortalParent().appendChild(container);\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var container = this.state.container;\n      var zIndex = this.props.zIndex;\n\n      if (container) {\n        getPortalParent().appendChild(container);\n      } else {\n        // SSR path\n        var newContainer = createContainer(zIndex); // eslint-disable-next-line react/no-did-mount-set-state\n\n        this.setState({\n          container: newContainer\n        });\n      } // eslint-disable-next-line react/no-did-mount-set-state\n\n\n      this.setState({\n        portalIsMounted: true\n      });\n      firePortalEvent(PORTAL_MOUNT_EVENT, Number(zIndex));\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var container = this.state.container;\n      var zIndex = this.props.zIndex;\n\n      if (container) {\n        getPortalParent().removeChild(container); // clean up parent element if there are no more portals\n\n        var portals = !!document.querySelector('body > .atlaskit-portal-container > .atlaskit-portal');\n\n        if (!portals) {\n          getBody().removeChild(getPortalParent());\n        }\n      }\n\n      firePortalEvent(PORTAL_UNMOUNT_EVENT, Number(zIndex));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          container = _this$state.container,\n          portalIsMounted = _this$state.portalIsMounted;\n      return container && portalIsMounted ? /*#__PURE__*/ReactDOM.createPortal(this.props.children, container) : null;\n    }\n  }]);\n\n  return Portal;\n}(React.Component);\n\n_defineProperty(Portal, \"defaultProps\", {\n  zIndex: 0\n});\n\nexport default Portal;","map":{"version":3,"sources":["/Users/oustan/Documents/PROJECTS/dancefest-web/frontend/node_modules/@atlaskit/portal/dist/esm/components/Portal.js"],"names":["_classCallCheck","_createClass","_assertThisInitialized","_inherits","_possibleConstructorReturn","_getPrototypeOf","_defineProperty","_createSuper","Derived","hasNativeReflectConstruct","_isNativeReflectConstruct","_createSuperInternal","Super","result","NewTarget","constructor","Reflect","construct","arguments","apply","sham","Proxy","Date","prototype","toString","call","e","React","canUseDOM","ReactDOM","invariant","layers","PORTAL_MOUNT_EVENT","PORTAL_UNMOUNT_EVENT","createContainer","zIndex","container","document","createElement","setAttribute","concat","getBody","body","zIndexToName","Object","keys","reduce","acc","name","layerName","value","getLayerName","hasOwnProperty","getEvent","eventName","detail","layer","Number","CustomEvent","event","createEvent","params","bubbles","cancellable","initCustomEvent","firePortalEvent","window","dispatchEvent","getPortalParent","parentElement","querySelector","parent","appendChild","Portal","_React$Component","_super","_this","_len","length","args","Array","_key","props","undefined","portalIsMounted","key","componentDidUpdate","prevProps","prevState","state","newContainer","replaceChild","setState","componentDidMount","componentWillUnmount","removeChild","portals","render","_this$state","createPortal","children","Component"],"mappings":"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","sourcesContent":["import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { canUseDOM } from 'exenv';\nimport ReactDOM from 'react-dom';\nimport invariant from 'tiny-invariant';\nimport { layers } from '@atlaskit/theme/constants';\nimport { PORTAL_MOUNT_EVENT, PORTAL_UNMOUNT_EVENT } from '../constants';\n\nvar createContainer = function createContainer(zIndex) {\n  var container = document.createElement('div');\n  container.setAttribute('class', 'atlaskit-portal');\n  container.setAttribute('style', \"z-index: \".concat(zIndex, \";\"));\n  return container;\n};\n\nvar getBody = function getBody() {\n  invariant(document && document.body, 'cannot find document.body');\n  return document.body;\n};\n/**\n * Reverses the name: zIndex object so we can quickly access it using the zIndex value as the key.\n */\n\n\nvar zIndexToName = Object.keys(layers).reduce(function (acc, name) {\n  var layerName = name;\n  var value = layers[layerName]();\n  acc[value] = layerName;\n  return acc;\n}, {});\n\nvar getLayerName = function getLayerName(zIndex) {\n  return Object.prototype.hasOwnProperty.call(zIndexToName, zIndex) ? zIndexToName[zIndex] : null;\n};\n\nvar getEvent = function getEvent(eventName, zIndex) {\n  var detail = {\n    layer: getLayerName(Number(zIndex)),\n    zIndex: zIndex\n  }; // In ie11 the CustomEvent object exists, but it cannot be used as a constructor\n\n  if (typeof CustomEvent === 'function') {\n    return new CustomEvent(eventName, {\n      detail: detail\n    });\n  } // CustomEvent constructor API not supported (ie11)\n  // Using `new Event` or `new CustomEvent` does not work in ie11\n\n\n  var event = document.createEvent('CustomEvent');\n  var params = {\n    bubbles: true,\n    cancellable: true,\n    detail: detail\n  };\n  event.initCustomEvent(eventName, params.bubbles, params.cancellable, params.detail);\n  return event;\n};\n\nvar firePortalEvent = function firePortalEvent(eventName, zIndex) {\n  var event = getEvent(eventName, zIndex);\n  window.dispatchEvent(event);\n};\n\nvar getPortalParent = function getPortalParent() {\n  var parentElement = document.querySelector('body > .atlaskit-portal-container');\n\n  if (!parentElement) {\n    var parent = document.createElement('div');\n    parent.setAttribute('class', 'atlaskit-portal-container');\n    parent.setAttribute('style', \"display: flex;\");\n    getBody().appendChild(parent);\n    return parent;\n  }\n\n  return parentElement;\n}; // This is a generic component does two things:\n// 1. Portals it's children using React.createPortal\n// 2. Creates the DOM node container for the portal based on props\n// 3. Ensures DOM the container creates it's own stacking context\n\n\nvar Portal = /*#__PURE__*/function (_React$Component) {\n  _inherits(Portal, _React$Component);\n\n  var _super = _createSuper(Portal);\n\n  function Portal() {\n    var _this;\n\n    _classCallCheck(this, Portal);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      container: canUseDOM ? createContainer(_this.props.zIndex) : undefined,\n      portalIsMounted: false\n    });\n\n    return _this;\n  }\n\n  _createClass(Portal, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var container = this.state.container;\n      var zIndex = this.props.zIndex;\n\n      if (container && prevProps.zIndex !== zIndex) {\n        var newContainer = createContainer(zIndex);\n        getPortalParent().replaceChild(container, newContainer); // eslint-disable-next-line react/no-did-update-set-state\n\n        this.setState({\n          container: newContainer\n        });\n      } else if (!prevState.container && container) {\n        // SSR path\n        getPortalParent().appendChild(container);\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var container = this.state.container;\n      var zIndex = this.props.zIndex;\n\n      if (container) {\n        getPortalParent().appendChild(container);\n      } else {\n        // SSR path\n        var newContainer = createContainer(zIndex); // eslint-disable-next-line react/no-did-mount-set-state\n\n        this.setState({\n          container: newContainer\n        });\n      } // eslint-disable-next-line react/no-did-mount-set-state\n\n\n      this.setState({\n        portalIsMounted: true\n      });\n      firePortalEvent(PORTAL_MOUNT_EVENT, Number(zIndex));\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var container = this.state.container;\n      var zIndex = this.props.zIndex;\n\n      if (container) {\n        getPortalParent().removeChild(container); // clean up parent element if there are no more portals\n\n        var portals = !!document.querySelector('body > .atlaskit-portal-container > .atlaskit-portal');\n\n        if (!portals) {\n          getBody().removeChild(getPortalParent());\n        }\n      }\n\n      firePortalEvent(PORTAL_UNMOUNT_EVENT, Number(zIndex));\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state = this.state,\n          container = _this$state.container,\n          portalIsMounted = _this$state.portalIsMounted;\n      return container && portalIsMounted ? /*#__PURE__*/ReactDOM.createPortal(this.props.children, container) : null;\n    }\n  }]);\n\n  return Portal;\n}(React.Component);\n\n_defineProperty(Portal, \"defaultProps\", {\n  zIndex: 0\n});\n\nexport default Portal;"]},"metadata":{},"sourceType":"module"}